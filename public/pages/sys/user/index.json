{
  "type": "page",
  "title": "列表",
  "remark": null,
  "name": "page-demo",
  "toolbar": [
    {
      "type": "button",
      "actionType": "dialog",
      "label": "新增",
      "icon": "fa fa-plus pull-left",
      "primary": true,
      "dialog": {
        "title": "新增",
        "body": {
          "type": "form",
          "name": "sample-edit-form",
          "api": "post:https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/sample",
          "body": [
            {
              "type": "input-text",
              "name": "engine",
              "label": "Engine",
              "required": true
            },
            {
              "type": "divider"
            },
            {
              "type": "input-text",
              "name": "browser",
              "label": "Browser",
              "required": true
            },
            {
              "type": "divider"
            },
            {
              "type": "input-text",
              "name": "platform",
              "label": "Platform(s)",
              "required": true
            },
            {
              "type": "divider"
            },
            {
              "type": "input-text",
              "name": "version",
              "label": "Engine version"
            },
            {
              "type": "divider"
            },
            {
              "type": "input-text",
              "name": "grade",
              "label": "CSS grade"
            }
          ]
        }
      }
    }
  ],
  "body": [
    {
      "type": "crud",
      "name": "sample",
      "api": {
        "method": "post",
        "url": "${ADMIN_API_BASEURL}/common/query",
        "data": {
          "table_name": "sys_user",
          "page": {
            "offset": "${(page - 1) * perPage}",
            "limit": 10,
            "query_count": true
          }
        }
      },
      "filter": {
        "title": "",
        "mode": "inline",
        "wrapWithPanel": false,
        "submitText": "",
        "controls": [
          {
            "type": "text",
            "name": "keywords",
            "placeholder": "通过关键字搜索",
            "addOn": {
              "label": "搜索",
              "type": "submit",
              "className": "btn-success"
            },
            "clearable": true
          }
        ],
        "className": "m-b-sm"
      },
      "bulkActions": [
        {
          "label": "批量删除",
          "type": "button",
          "level": "danger",
          "actionType": "ajax",
          "api": "delete:${API_HOST}/api/amis-mock/sample/$ids",
          "confirmText": "确定要批量删除?"
        }
      ],
      "columns": [
        {
          "name": "id",
          "label": "ID",
          "width": 20,
          "sortable": true
        },
        {
          "name": "username",
          "label": "用户名"
        },
        {
          "name": "email",
          "label": "邮箱"
        },
        {
          "name": "nickname",
          "label": "昵称"
        },
        {
          "name": "status",
          "label": "状态"
        },
        {
          "name": "ctime",
          "label": "创建时间",
          "tpl": "${ctime | date:YYYY-MM-DD hh\\:mm\\:ss:x}"
        },
        {
          "type": "operation",
          "label": "操作",
          "width": 100,
          "buttons": [
            {
              "type": "button",
              "icon": "fa fa-eye",
              "actionType": "dialog",
              "tooltip": "查看",
              "dialog": {
                "title": "查看",
                "body": {
                  "type": "form",
                  "body": [
                    {
                      "type": "static",
                      "name": "engine",
                      "label": "Engine"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "static",
                      "name": "browser",
                      "label": "Browser"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "static",
                      "name": "platform",
                      "label": "Platform(s)"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "static",
                      "name": "version",
                      "label": "Engine version"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "static",
                      "name": "grade",
                      "label": "CSS grade"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "html",
                      "html": "<p>添加其他 <span>Html 片段</span> 需要支持变量替换（todo）.</p>"
                    }
                  ]
                }
              }
            },
            {
              "type": "button",
              "icon": "fa fa-pencil",
              "tooltip": "编辑",
              "actionType": "drawer",
              "drawer": {
                "position": "left",
                "size": "lg",
                "title": "编辑",
                "body": {
                  "type": "form",
                  "name": "sample-edit-form",
                  "data": {
                    "env": "test"
                  },
                  "api": {
                    "method": "post",
                    "url": "https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/sample/$id",
                    "messages": {
                      "success": "成功了-${env}"
                    }
                  },
                  "body": [
                    {
                      "type": "input-text",
                      "name": "engine",
                      "label": "Engine",
                      "required": true
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "input-text",
                      "name": "browser",
                      "label": "Browser",
                      "required": true
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "input-text",
                      "name": "platform",
                      "label": "Platform(s)",
                      "required": true
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "input-text",
                      "name": "version",
                      "label": "Engine version"
                    },
                    {
                      "type": "divider"
                    },
                    {
                      "type": "select",
                      "name": "grade",
                      "label": "CSS grade",
                      "options": ["A", "B", "C", "D", "X"]
                    }
                  ]
                }
              }
            },
            {
              "type": "button",
              "icon": "fa fa-times text-danger",
              "actionType": "ajax",
              "tooltip": "删除",
              "confirmText": "您确认要删除?",
              "api": "delete:https://3xsw4ap8wah59.cfc-execute.bj.baidubce.com/api/amis-mock/sample/$id"
            }
          ],
          "toggled": true
        }
      ],
      "affixHeader": true,
      "columnsTogglable": "auto",
      "placeholder": "暂无数据",
      "combineNum": 0,
      "bodyClassName": "panel-default"
    }
  ]
}
